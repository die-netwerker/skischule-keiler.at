import{o as i,N as a,q as o,G as r,u as n}from"./main-DLOZxWIX.js";import"./channel-D6fkBpuJ.js";import{g as l,e as m,u as t}from"./permissions-Cb6wGjLU.js";import"./administration-BkFWn-Oy.js";const c=`<mt-modal-root :is-open="showGrantPermissionsModal" @change="prepareRevisions" > <mt-modal :title="$t('sw-settings-services.general.title')" > <div class="sw-settings-services-grant-permissions-modal__content"> <img :src="grantPermissionsBackground" alt="" > <h2>{{ $t('sw-settings-services.grant-permissions.title') }}</h2> <p>{{ $t('sw-settings-services.grant-permissions.description') }}</p> <mt-link type="external" as="a" target="_blank" :disabled="feedbackLink === ''" :href="feedbackLink" > {{ $t('sw-settings-services.grant-permissions.label-link-more-information') }} </mt-link> </div> <template #footer> <div class="sw-settings-services-grant-permissions-modal__footer"> <mt-modal-close as="mt-button" variant="secondary" size="small" > {{ $t('global.default.cancel') }} </mt-modal-close> <mt-modal-action as="mt-button" variant="primary" size="small" :is-loading="isLoading" @click="grantPermissions" > {{ $t('sw-settings-services.grant-permissions.label-button-grant-permissions') }} </mt-modal-action> </div> </template> </mt-modal> </mt-modal-root>`,h=Shopware.Component.wrapComponentConfig({name:"sw-settings-services-grant-permissions-modal",template:c,components:{MtModal:r,MtModalRoot:o,MtModalAction:a,MtModalClose:i},data(){return{grantPermissionsBackground:Shopware.Filter.getByName("asset")("/administration/administration/static/img/services/grant-permissions-background.svg"),isLoading:!1}},computed:{feedbackLink(){var s;return((s=t().currentRevision)==null?void 0:s.links["docs-url"])??""},showGrantPermissionsModal:{get(){return t().showGrantPermissionsModal},set(s){t().showGrantPermissionsModal=s}}},methods:{prepareRevisions(s){this.showGrantPermissionsModal=s,this.showGrantPermissionsModal&&!this.feedbackLink&&Shopware.Service("serviceRegistryClient").getCurrentRevision(n().currentLocale.value).then(e=>{t().revisions=e}).catch(()=>{})},async grantPermissions(s){try{this.isLoading=!0,await l()}catch(e){Shopware.Store.get("notification").createNotification({variant:"critical",title:this.$t("global.default.error"),message:m(e)})}finally{this.isLoading=!1,s()}}}});export{h as default};
