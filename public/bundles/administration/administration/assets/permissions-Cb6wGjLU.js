const n=Shopware.Store.register("shopwareServices",{state:()=>({config:null,revisions:null,showGrantPermissionsModal:!1}),getters:{consentGiven(){var s,i;const e=((s=this.config)==null?void 0:s.permissionsConsent)??!1;if(e===!1)return!1;const r=((i=this.revisions)==null?void 0:i["latest-revision"])??!1;return r===!1?!1:r===e.revision},currentRevision(){return this.revisions?this.revisions["available-revisions"].find(e=>e.revision===this.revisions["latest-revision"])??null:null}}});function a(e){var s,i;let r="unknown error";return e instanceof Error&&(r=e.message),t(e)&&(r=((i=(s=e.response)==null?void 0:s.data.errors[0])==null?void 0:i.detail)??"unknown error"),r}function o(e){return e instanceof Error&&e.name==="AxiosError"}function t(e){return o(e)&&typeof e.response<"u"}async function v(){var s;const r=(s=n().currentRevision)==null?void 0:s.revision;if(!r)throw new Error("No revision available");await Shopware.Service("shopwareServicesService").acceptRevision(r),window.location.reload()}async function c(){await Shopware.Service("shopwareServicesService").revokePermissions(),window.location.reload()}export{a as e,v as g,c as r,n as u};
