import{Q as a}from"./channel-D6fkBpuJ.js";const r='{% block sw_time_ago %} <span v-tooltip="{ message: fullDatetime, disabled: !isToday }" >{{ formattedRelativeTime }}</span> {% endblock %}';let o=null;const i=new Set;function u(t){i.size===0&&(o=setInterval(()=>{i.forEach(e=>e())},3e4)),i.add(t),t(),a(()=>{i.delete(t),o&&!i.size&&(clearInterval(o),o=null)})}const l=Shopware.Component.wrapComponentConfig({template:r,props:{date:{type:[Date,String],required:!0},dateTimeFormat:{type:Object,required:!1,default:{}}},data(){return{formattedRelativeTime:null,interval:null,now:Date.now()}},computed:{dateObject(){return typeof this.date=="string"?new Date(this.date):this.date},dateFilter(){return Shopware.Filter.getByName("date")},fullDatetime(){return this.dateFilter(this.dateObject.toString(),this.dateTimeFormat)},lessThanOneMinute(){const e=this.now-6e4;return this.dateObject.getTime()>e},lessThanOneHour(){const e=this.now-36e5;return this.dateObject.getTime()>e},lessThanOneMinuteFromNow(){const e=this.now+6e4;return this.dateObject.getTime()<e},lessThanOneHourFromNow(){const e=this.now+36e5;return this.dateObject.getTime()<e},isToday(){const t=new Date(Date.now());return this.dateObject.getDate()===t.getDate()&&this.dateObject.getMonth()===t.getMonth()&&this.dateObject.getFullYear()===t.getFullYear()}},mounted(){u(()=>{this.now=Date.now(),this.formattedRelativeTime=this.formatRelativeTime()})},methods:{formatRelativeTime(){const t=Date.now()-this.dateObject.getTime(),e=Math.round(t/1e3),n=Math.round(e/60);if(t>=0){if(this.lessThanOneMinute)return this.$tc("global.sw-time-ago.justNow");if(this.lessThanOneHour)return this.$tc("global.sw-time-ago.minutesAgo",{minutesAgo:n},n)}else{if(this.lessThanOneMinuteFromNow)return this.$tc("global.sw-time-ago.aboutNow");if(this.lessThanOneHourFromNow){const s=Math.abs(n);return this.$tc("global.sw-time-ago.minutesFromNow",{minutesFromNow:s},s)}}return this.isToday?this.dateFilter(this.dateObject.toString(),{year:void 0,month:void 0,day:void 0}):this.dateFilter(this.dateObject.toString(),this.dateTimeFormat)}}});export{l as default};
