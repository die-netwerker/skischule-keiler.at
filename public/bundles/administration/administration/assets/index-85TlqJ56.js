import{l as s}from"./main-DLOZxWIX.js";import"./channel-D6fkBpuJ.js";import"./administration-BkFWn-Oy.js";const n=`{% block sw_login_recovery %} <div class="sw-login-recovery"> {% block sw_login_recovery_headline %} <h2 class="sw-login__form-headline"> <router-link class="sw-login__back" :to="{ name: 'sw.login.index.login' }" > <mt-icon class="sw-login__back-arrow" name="regular-long-arrow-left" size="16px" /> </router-link> {{ $tc('sw-login.recovery.headline') }} </h2> {% endblock %} {% block sw_login_recovery_text %} <p>{{ $tc('sw-login.recovery.text') }}</p> {% endblock %} {% block sw_login_recovery_form %} <form class="sw-login__recovery-form" @submit.prevent="sendRecoveryMail" > {% block sw_login_recovery_form_email_field %} <mt-text-field ref="swLoginRecoveryEmailField" v-model="email" :label="$tc('sw-login.recovery.email.label')" :placeholder="$tc('sw-login.recovery.email.placeholder')" /> {% endblock %} {% block sw_login_recovery_form_submit %} <div class="sw-login__submit"> <mt-button variant="primary" :disabled="!isEmailValid()" type="submit" > {{ $tc('sw-login.recovery.submit') }} </mt-button> </div> {% endblock %} </form> {% endblock %} </div> {% endblock %}`,{Component:t}=Shopware,d=t.wrapComponentConfig({template:n,inject:["userRecoveryService"],emits:["is-loading"],data(){return{email:""}},mounted(){this.mountedComponent()},methods:{mountedComponent(){this.$refs.swLoginRecoveryEmailField.$el.querySelector("input").focus()},isEmailValid(){return s(this.email)},sendRecoveryMail(){this.$emit("is-loading"),this.userRecoveryService.createRecovery(this.email).then(()=>{this.displayRecoveryInfo()}).catch(o=>{this.displayRecoveryInfo(o.response.data)})},displayRecoveryInfo(o=null){var l,r;let i=0;if(o!==null){let e=o==null?void 0:o.errors;e=Array.isArray(e)?e[0]:e,parseInt(e==null?void 0:e.status,10)===429&&(i=(r=(l=e==null?void 0:e.meta)==null?void 0:l.parameters)==null?void 0:r.seconds)}this.$router.push({name:"sw.login.index.recoveryInfo",params:{waitTime:i}})}}});export{d as default};
