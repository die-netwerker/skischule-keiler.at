const d=`{% block sw_tabs %} <div class="sw-tabs" :class="tabClasses" > {% block sw_tabs_content %} <div ref="swTabContent" class="sw-tabs__content" :style="tabContentStyle" role="tablist" > {% block sw_tabs_content_slot %} <slot :active="active"></slot> {% endblock %} <sw-tabs-item v-for="tabExtension in tabExtensions" :key="tabExtension.componentSectionId" :name="tabExtension.componentSectionId" :active-tab="active" :route="hasRoutes ? { path: tabExtension.componentSectionId } : ''" > {{ $tc(tabExtension.label ?? '') }} </sw-tabs-item> {% block sw_tabs_slider %} <span class="sw-tabs__slider" :class="sliderClasses" :style="sliderStyle" ></span> {% endblock %} </div> {% endblock %} {% block sw_tabs_arrow_left %} <button v-if="isScrollable" class="sw-tabs__arrow sw-tabs__arrow--left" :class="arrowClassesLeft" @click="scrollTo('left')" > <mt-icon name="regular-chevron-left-xs" /> </button> {% endblock %} {% block sw_tabs_arrow_right %} <button v-if="isScrollable" class="sw-tabs__arrow sw-tabs__arrow--right" :class="arrowClassesRight" @click="scrollTo('right')" > <mt-icon name="regular-chevron-right-xs" /> </button> {% endblock %} <div class="sw-tabs__custom-content"> {% block sw_tabs_custom_content %} <slot name="content" :active="active" ></slot> {% endblock %} <template v-if="!hasRoutes"> <template v-for="tabExtension in tabExtensions" :key="tabExtension.componentSectionId" > <sw-extension-component-section v-if="tabExtension.componentSectionId === active" :position-identifier="tabExtension.componentSectionId" /> </template> </template> </div> </div> {% endblock %}`,f=Shopware.Utils,m=Shopware.Utils.dom,u={template:d,inject:["feature"],provide(){return{onNewItemActive:this.registerOnNewItemActiveHandler,registerNewTabItem:this.registerNewTabItem,unregisterNewTabItem:this.unregisterNewTabItem,swTabsSetActiveItem:this.setActiveItem}},emits:["new-item-active"],extensionApiDevtoolInformation:{property:"ui.tabs",positionId:t=>t.positionIdentifier},props:{positionIdentifier:{type:String,required:!0,default:null},isVertical:{type:Boolean,required:!1,default:!1},small:{type:Boolean,required:!1,default:!0},alignRight:{type:Boolean,required:!1,default:!1},defaultItem:{type:String,required:!1,default:""}},data(){return{active:this.defaultItem||"",isScrollable:!1,activeItem:null,scrollLeftPossible:!1,scrollRightPossible:!0,firstScroll:!1,scrollbarOffset:"",hasRoutes:!1,onNewItemActiveHandlers:[],registeredTabItems:[]}},computed:{tabClasses(){return{"sw-tabs--vertical":this.isVertical,"sw-tabs--small":this.small,"sw-tabs--scrollable":this.isScrollable,"sw-tabs--align-right":this.alignRight,"sw-tabs--scrollbar-active":this.scrollbarOffset>0}},arrowClassesLeft(){return{"sw-tabs__arrow--disabled":!this.scrollLeftPossible}},arrowClassesRight(){return{"sw-tabs__arrow--disabled":!this.scrollRightPossible}},sliderLength(){if(this.registeredTabItems[this.activeItem]){const t=this.registeredTabItems[this.activeItem].$el,e=window.getComputedStyle(t);return this.isVertical?e.height:e.width}return 0},activeTabHasErrors(){var t;return((t=this.registeredTabItems[this.activeItem])==null?void 0:t.hasError)??!1},activeTabHasWarnings(){var t;return((t=this.registeredTabItems[this.activeItem])==null?void 0:t.hasWarning)??!1},sliderClasses(){return{"has--error":this.activeTabHasErrors,"has--warning":!this.activeTabHasErrors&&this.activeTabHasWarnings}},sliderMovement(){if(this.registeredTabItems[this.activeItem]){const t=this.registeredTabItems[this.activeItem];return this.isVertical?t.$el.offsetTop:t.$el.offsetLeft}return 0},sliderStyle(){return this.isVertical?`
                    transform: translate(0, ${this.sliderMovement}px) rotate(${this.alignRight?"-90deg":"90deg"});
                    width: ${this.sliderLength};
                `:`
                transform: translate(${this.sliderMovement}px, 0) rotate(0deg);
                width: ${this.sliderLength};
                bottom: ${this.scrollbarOffset}px;
            `},tabContentStyle(){return{"padding-bottom":`${this.scrollbarOffset}px`}},tabExtensions(){return Shopware.Store.get("tabs").tabItems[this.positionIdentifier]??[]}},watch:{$route(){this.updateActiveItem()},defaultItem(){this.active=this.defaultItem,this.updateActiveItem()},activeTabHasErrors(){this.recalculateSlider()},activeTabHasWarnings(){this.recalculateSlider()}},created(){this.createdComponent()},mounted(){this.mountedComponent()},beforeUnmount(){this.beforeDestroyComponent()},methods:{createdComponent(){this.updateActiveItem()},mountedComponent(){var s,i,r,a,o,n,l,c;const t=this.$refs.swTabContent;this.scrollEventHandler=f.throttle(()=>{const b=t.scrollWidth-t.offsetWidth,h=t.scrollLeft;this.scrollRightPossible=!(b-h<5),this.scrollLeftPossible=!(h<5)},100),this.tabContentMutationObserver=new MutationObserver(this.onTabBarResize),this.tabContentMutationObserver.observe(t,{subtree:!0,characterData:!0,attributes:!0}),t.addEventListener("scroll",this.scrollEventHandler),this.checkIfNeedScroll(),this.addScrollbarOffset();const e=this;this.$device.onResize({listener(){e.checkIfNeedScroll(),e.addScrollbarOffset()},component:this}),this.recalculateSlider(),this.$slots.default&&((r=(i=(s=this.$slots.default({active:this.active}))==null?void 0:s[0])==null?void 0:i.props)!=null&&r.route)&&(this.hasRoutes=!0),this.$slots.default&&((c=(l=(n=(o=(a=this.$slots.default({active:this.active}))==null?void 0:a[0])==null?void 0:o.children)==null?void 0:n[0])==null?void 0:l.props)!=null&&c.route)&&(this.hasRoutes=!0)},beforeDestroyComponent(){const t=this.$refs.swTabContent;t&&t.removeEventListener("scroll",this.scrollEventHandler),this.$device.removeResizeListener(this),this.tabContentMutationObserver&&this.tabContentMutationObserver.disconnect()},registerOnNewItemActiveHandler(t){this.onNewItemActiveHandlers.push(t)},registerNewTabItem(t){this.registeredTabItems.push(t)},unregisterNewTabItem(t){this.registeredTabItems=this.registeredTabItems.filter(e=>e!==t)},onNewItemActiveHandler(t){this.onNewItemActiveHandlers.forEach(e=>{e(t)})},onTabBarResize(){requestAnimationFrame(async()=>{this.checkIfNeedScroll(),this.addScrollbarOffset(),this.recalculateSlider()})},recalculateSlider(){window.setTimeout(()=>{const t=this.activeItem;this.activeItem=null,this.activeItem=t},0)},updateActiveItem(){this.$nextTick().then(()=>{const t=this.registeredTabItems.find(e=>e.$el.nodeType===1&&e.$el.classList.contains("sw-tabs-item--active"));t&&(this.activeItem=this.registeredTabItems.indexOf(t),this.firstScroll||this.scrollToItem(t),this.firstScroll=!0)})},scrollTo(t){if(!["left","right"].includes(t))return;const e=this.$refs.swTabContent,s=e.offsetWidth;if(t==="right"){e.scrollLeft+=s/2;return}e.scrollLeft+=-(s/2)},checkIfNeedScroll(){const t=this.$refs.swTabContent;t&&(this.isScrollable=t.scrollWidth!==t.offsetWidth)},setActiveItem(t){this.$emit("new-item-active",t),this.onNewItemActiveHandler(t),this.active=t.name,this.updateActiveItem()},scrollToItem(t){const e=this.$refs.swTabContent,s=e.offsetWidth,i=t.$el.offsetLeft,r=t.$el.clientWidth;if(s/2<i){const a=i-s/2+r/2;e.scrollLeft=a}},addScrollbarOffset(){this.$refs.swTabContent&&(this.scrollbarOffset=m.getScrollbarHeight(this.$refs.swTabContent))}}};export{u as default};
