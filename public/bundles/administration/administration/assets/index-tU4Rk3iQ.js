const n='{% block sw_form_field_renderer %} {# The last 3 event handlers are for meteor components #} <component :is="componentName" v-bind="bind" ref="component" v-model:[componentPropName]="currentValue" class="sw-form-field-renderer" :error="error" @update:value="emitUpdate" @update:ids="emitUpdate" @update:entity-collection="emitUpdate" > {% block sw_form_field_renderer_scope_slots %} <template v-for="(slot, slotName) in getScopedSlots()" #[slotName]="slotData" > <slot :name="slotName" v-bind="slotData" > </slot> </template> {% endblock %} {% block sw_form_field_renderer_inner %} <slot> {% block sw_form_field_renderer_inner_slot %}{% endblock %} </slot> {% endblock %} </component> {% endblock %}',{Mixin:o}=Shopware,{types:a}=Shopware.Utils,l={template:n,inheritAttrs:!1,inject:["repositoryFactory","feature"],emits:["update:value"],mixins:[o.getByName("sw-inline-snippet")],props:{type:{type:String,required:!1,default:null},config:{type:Object,required:!1,default:null},value:{required:!0},error:{type:Object,required:!1,default:null}},data(){return{currency:{id:Shopware.Context.app.systemCurrencyId,factor:1},currentComponentName:"",swFieldConfig:{},currentValue:this.type==="price"&&!this.value&&!Array.isArray(this.value)?[{currencyId:Shopware.Context.app.systemCurrencyId,gross:null,net:null,linked:!0}]:this.value}},computed:{bind(){let e={};return Object.keys(this.$attrs).forEach(t=>{["onUpdate:value"].includes(t)||(e[t]=this.$attrs[t])}),e={...e,...this.config,...this.swFieldType,...this.translations,...this.optionTranslations},this.componentName==="sw-entity-multi-id-select"&&(e.repository=this.createRepository(this.config.entity)),e},hasConfig(){return!!this.config},componentName(){return this.hasConfig?this.config.componentName==="sw-field"?this.getComponentFromType(this.config.type):this.config.componentName||this.getComponentFromType():this.getComponentFromType()},swFieldType(){return this.type==="price"?{type:"price",allowModal:!0,hideListPrices:!0,currency:this.currency}:this.hasConfig&&this.config.hasOwnProperty("type")?{}:this.type==="int"?{type:"number",numberType:"int"}:this.type==="float"?{type:"number",numberType:"float"}:this.type==="string"||this.type==="text"?{type:"text"}:this.type==="bool"?{type:"switch",bordered:!0}:this.type==="datetime"?{type:"date",dateType:"datetime"}:this.type==="date"?{type:"date",dateType:"date"}:this.type==="time"?{type:"date",dateType:"time"}:{type:this.type}},translations(){return this.getTranslations(this.componentName)},optionTranslations(){if(["sw-single-select","sw-multi-select"].includes(this.componentName)){if(!this.config.hasOwnProperty("options"))return{};const e=[];let t="label";return this.config.hasOwnProperty("labelProperty")&&(t=this.config.labelProperty),this.config.options.forEach(r=>{const i=this.getTranslations("options",r,[t]);i.label||(i.label=r.value);const s={...r,...i};e.push(s)}),{options:e}}return{}},componentPropName(){switch(this.componentName){case"mt-textarea":case"mt-switch":case"mt-number-field":return"modelValue";default:return"value"}}},watch:{currentValue:{handler(e){Array.isArray(e)&&Array.isArray(this.value)&&e.length===this.value.length&&e.every((t,r)=>t===this.value[r])||e!==this.value&&this.$emit("update:value",e)},deep:!0},value(){this.currentValue=this.value}},created(){this.createdComponent()},methods:{createdComponent(){this.fetchSystemCurrency()},emitUpdate(e){this.$emit("update:value",e)},getTranslations(e,t=this.config,r=["label","placeholder","helpText"]){if(!r)return{};const i={};return r.forEach(s=>{t[s]&&t[s]!==""&&(i[s]=this.getInlineSnippet(t[s]))}),i},getComponentFromType(e=void 0){const t=e??this.type;return{bool:"sw-switch-field-deprecated",switch:"sw-switch-field-deprecated",textarea:"sw-textarea-field-deprecated",checkbox:"sw-checkbox-field-deprecated",colorpicker:"sw-colorpicker-deprecated",compactColorpicker:"sw-compact-colorpicker",date:"sw-datepicker-deprecated",datetime:"sw-datepicker-deprecated",time:"sw-datepicker-deprecated",email:"sw-email-field-deprecated",float:"sw-number-field-deprecated",int:"sw-number-field-deprecated",number:"sw-number-field-deprecated","multi-entity-id-select":"sw-entity-multi-id-select","multi-select":"sw-multi-select",password:"sw-password-field-deprecated",price:"sw-price-field",radio:"sw-radio-field","single-entity-id-select":"sw-entity-single-select","single-select":"sw-single-select",string:"sw-text-field-deprecated",text:"sw-text-field-deprecated",tagged:"sw-tagged-field",url:"sw-url-field-deprecated"}[t]??"sw-text-field-deprecated"},createRepository(e){if(a.isUndefined(e))throw new Error("sw-form-field-renderer - sw-entity-multi-id-select component needs entity property");return this.repositoryFactory.create(e)},fetchSystemCurrency(){const e=Shopware.Context.app.systemCurrencyId;this.createRepository("currency").get(e).then(t=>{this.currency=t})},getScopedSlots(){return this.$slots}}};export{l as default};
