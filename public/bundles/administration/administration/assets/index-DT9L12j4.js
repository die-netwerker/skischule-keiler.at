const c=`{% block sw_cms_block_config %} <div class="sw-cms-block-config"> {% block sw_cms_block_config__quickactions %} <ul class="sw-cms-block-config__quickactions-list" > {% block sw_cms_block_config__quickaction_duplicate %} <li class="sw-cms-block-config__quickaction" :class="combinedDuplicateClasses" role="button" tabindex="0" @click="onBlockDuplicate" @keydown.enter="onBlockDuplicate" > <mt-icon name="regular-duplicate" size="16" /> {{ $tc('global.default.duplicate') }} </li> {% endblock %} {% block sw_cms_block_config__quickaction_delete %} <li class="sw-cms-block-config__quickaction is--danger" :class="quickactionClasses" role="button" tabindex="0" @click="onBlockDelete" @keydown.enter="onBlockDelete" > <mt-icon name="regular-trash" size="16" /> {{ $t('global.default.delete') }} </li> {% endblock %} </ul> {% endblock %} {% block sw_cms_block_config__settings %} <div class="sw-cms-section-config__settings"> {% block sw_cms_block_config_name_field %} <mt-text-field :model-value="block.name" :label="$tc('sw-cms.detail.label.blockNameField')" :placeholder="$tc('sw-cms.detail.label.blockNameFieldPlaceholder')" :help-text="$tc('sw-cms.detail.tooltip.blockNameField')" @update:model-value="onBlockNameChange" /> {% endblock %} {% block sw_cms_block_config_background_color_field %} <mt-colorpicker v-model="block.backgroundColor" :label="$tc('sw-cms.detail.label.backgroundColorLabel')" :placeholder="$tc('sw-cms.detail.label.backgroundColorField')" /> {% endblock %} {% block sw_cms_block_config_background_image_field %} <sw-media-compact-upload-v2 :source="block && block.backgroundMedia && block.backgroundMedia.id ? block.backgroundMedia : null" :upload-tag="uploadTag" :label="$tc('sw-cms.detail.label.backgroundMediaLabel')" :default-folder="cmsPageState.pageEntityName" :allow-multi-select="false" @media-upload-remove-image="removeMedia" @selection-change="onSetBackgroundMedia" /> <sw-upload-listener :upload-tag="uploadTag" auto-upload @media-upload-finish="successfulUpload" /> {% block sw_cms_block_config_background_image_position_field %} <mt-select v-model="block.backgroundMediaMode" :label="$tc('sw-cms.detail.label.backgroundMediaMode')" :disabled="!block.backgroundMediaId" :options="backgroundModeOptions" /> {% endblock %} {% endblock %} </div> {% endblock %} </div> {% endblock %}`,l=Shopware.Component.wrapComponentConfig({template:c,inject:["repositoryFactory","cmsService"],emits:["block-delete","block-duplicate"],mixins:[Shopware.Mixin.getByName("cms-state")],props:{block:{type:Object,required:!0}},computed:{uploadTag(){return`cms-block-media-config-${this.block.id}`},mediaRepository(){return this.repositoryFactory.create("media")},cmsPageState(){return Shopware.Store.get("cmsPage")},cmsBlocks(){return this.cmsService.getCmsBlockRegistry()},blockConfig(){return this.cmsBlocks[this.block.type]},quickactionsDisabled(){var e;return!this.isSystemDefaultLanguage||((e=this.blockConfig)==null?void 0:e.removable)===!1},duplicateDisabled(){return!this.block.id||this.block._isNew},combinedDuplicateDisabled(){return this.quickactionsDisabled||this.duplicateDisabled},combinedDuplicateClasses(){return{"is--disabled":this.combinedDuplicateDisabled}},quickactionClasses(){return{"is--disabled":this.quickactionsDisabled}},backgroundModeOptions(){return[{id:1,value:"auto",label:this.$tc("sw-cms.detail.label.backgroundMediaModeAuto")},{id:2,value:"contain",label:this.$tc("sw-cms.detail.label.backgroundMediaModeContain")},{id:3,value:"cover",label:this.$tc("sw-cms.detail.label.backgroundMediaModeCover")}]}},methods:{onSetBackgroundMedia([e]){this.block.backgroundMediaId=e.id,this.block.backgroundMedia=e},async successfulUpload(e){this.block.backgroundMediaId=e.targetId,this.block.backgroundMedia=await this.mediaRepository.get(e.targetId)??void 0},removeMedia(){this.block.backgroundMediaId=void 0,this.block.backgroundMedia=void 0},onBlockDelete(){this.quickactionsDisabled||this.$emit("block-delete",this.block)},onBlockDuplicate(){this.combinedDuplicateDisabled||this.$emit("block-duplicate",this.block)},onBlockNameChange(e){this.block.name=e}}});export{l as default};
