const a=`{% block sw_product_detail_seo %} <div v-if="isLoading"> <sw-skeleton variant="detail-bold" /> <sw-skeleton /> </div> <div v-else> {% block sw_product_detail_seo_general %} <mt-card position-identifier="sw-product-detail-seo" :title="$tc('sw-product.seo.cardTitleSeo')" > {% block sw_product_detail_seo_general_content %} <sw-product-seo-form ref="seoForm" :allow-edit="acl.can('product.editor')" /> {% endblock %} </mt-card> {% endblock %} {% block sw_product_detail_seo_urls %} <sw-seo-url v-if="product.seoUrls" :has-default-template="false" :disabled="!acl.can('product.editor')" :urls="product.seoUrls" @on-change-sales-channel="onChangeSalesChannel" > {% block sw_product_detail_seo_urls_content %} <template #seo-additional="props"> {% block sw_product_detail_seo_urls_content_seo_additional %} <sw-inherit-wrapper v-if="product.mainCategories" v-model:value="productMainCategory" :has-parent="!!parentProduct.id && !!props.currentSalesChannelId && product.categories.length === 0" :label="$tc('sw-seo-url.labelMainCategory')" :inherited-value="parentMainCategory" > <template #content="{ currentValue, isInherited }"> {% block sw_product_detail_seo_urls_content_seo_additional_edit %} <sw-seo-main-category :current-sales-channel-id="props.currentSalesChannelId" :categories="categories" :main-categories="isInherited ? parentProduct.mainCategories : product.mainCategories" :overwrite-label="true" :allow-edit="acl.can('product.editor') && !isInherited" @main-category-add="onAddMainCategory" @main-category-remove="onRemoveMainCategory" /> {% endblock %} </template> </sw-inherit-wrapper> {% endblock %} </template> {% endblock %} </sw-seo-url> {% endblock %} </div> {% endblock %}`,o={template:a,inject:["feature","acl","repositoryFactory"],data(){return{currentSalesChannelId:void 0}},computed:{product(){return Shopware.Store.get("swProductDetail").product},parentProduct(){return Shopware.Store.get("swProductDetail").parentProduct},isLoading(){return Shopware.Store.get("swProductDetail").isLoading},categories(){return this.product.categories.length>0?this.product.categories:this.parentProduct.categories??[]},mainCategoryRepository(){return this.repositoryFactory.create("main_category")},parentMainCategory(){return this.parentProduct.mainCategories&&this.currentSalesChannelId?this.parentProduct.mainCategories.find(e=>e.salesChannelId===this.currentSalesChannelId):null},productMainCategory:{get(){return this.product.mainCategories.find(e=>e.salesChannelId===this.currentSalesChannelId)},set(e){if(!e){this.product.mainCategories=this.product.mainCategories.filter(r=>r.salesChannelId!==this.currentSalesChannelId);return}const t=this.mainCategoryRepository.create();t.productId=this.product.id,t.categoryId=e.categoryId,t.salesChannelId=e.salesChannelId,e.category&&(t.category=e.category),this.onRemoveMainCategory(e),this.onAddMainCategory(t)}}},methods:{onAddMainCategory(e){this.product.mainCategories&&this.product.mainCategories.push(e)},onRemoveMainCategory(e){this.product.mainCategories&&(this.product.mainCategories=this.product.mainCategories.filter(t=>t.salesChannelId!==e.salesChannelId))},onChangeSalesChannel(e){this.currentSalesChannelId=e}}};export{o as default};
